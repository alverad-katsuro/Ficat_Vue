(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{401:function(e,t,n){var content=n(445);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(29).default)("3320c0d4",content,!0,{sourceMap:!1})},402:function(e,t,n){var content=n(447);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(29).default)("26fc14c8",content,!0,{sourceMap:!1})},443:function(e,t,n){var map={"./af":266,"./af.js":266,"./ar":267,"./ar-dz":268,"./ar-dz.js":268,"./ar-kw":269,"./ar-kw.js":269,"./ar-ly":270,"./ar-ly.js":270,"./ar-ma":271,"./ar-ma.js":271,"./ar-sa":272,"./ar-sa.js":272,"./ar-tn":273,"./ar-tn.js":273,"./ar.js":267,"./az":274,"./az.js":274,"./be":275,"./be.js":275,"./bg":276,"./bg.js":276,"./bm":277,"./bm.js":277,"./bn":278,"./bn-bd":279,"./bn-bd.js":279,"./bn.js":278,"./bo":280,"./bo.js":280,"./br":281,"./br.js":281,"./bs":282,"./bs.js":282,"./ca":283,"./ca.js":283,"./cs":284,"./cs.js":284,"./cv":285,"./cv.js":285,"./cy":286,"./cy.js":286,"./da":287,"./da.js":287,"./de":288,"./de-at":289,"./de-at.js":289,"./de-ch":290,"./de-ch.js":290,"./de.js":288,"./dv":291,"./dv.js":291,"./el":292,"./el.js":292,"./en-au":293,"./en-au.js":293,"./en-ca":294,"./en-ca.js":294,"./en-gb":295,"./en-gb.js":295,"./en-ie":296,"./en-ie.js":296,"./en-il":297,"./en-il.js":297,"./en-in":298,"./en-in.js":298,"./en-nz":299,"./en-nz.js":299,"./en-sg":300,"./en-sg.js":300,"./eo":301,"./eo.js":301,"./es":302,"./es-do":303,"./es-do.js":303,"./es-mx":304,"./es-mx.js":304,"./es-us":305,"./es-us.js":305,"./es.js":302,"./et":306,"./et.js":306,"./eu":307,"./eu.js":307,"./fa":308,"./fa.js":308,"./fi":309,"./fi.js":309,"./fil":310,"./fil.js":310,"./fo":311,"./fo.js":311,"./fr":312,"./fr-ca":313,"./fr-ca.js":313,"./fr-ch":314,"./fr-ch.js":314,"./fr.js":312,"./fy":315,"./fy.js":315,"./ga":316,"./ga.js":316,"./gd":317,"./gd.js":317,"./gl":318,"./gl.js":318,"./gom-deva":319,"./gom-deva.js":319,"./gom-latn":320,"./gom-latn.js":320,"./gu":321,"./gu.js":321,"./he":322,"./he.js":322,"./hi":323,"./hi.js":323,"./hr":324,"./hr.js":324,"./hu":325,"./hu.js":325,"./hy-am":326,"./hy-am.js":326,"./id":327,"./id.js":327,"./is":328,"./is.js":328,"./it":329,"./it-ch":330,"./it-ch.js":330,"./it.js":329,"./ja":331,"./ja.js":331,"./jv":332,"./jv.js":332,"./ka":333,"./ka.js":333,"./kk":334,"./kk.js":334,"./km":335,"./km.js":335,"./kn":336,"./kn.js":336,"./ko":337,"./ko.js":337,"./ku":338,"./ku.js":338,"./ky":339,"./ky.js":339,"./lb":340,"./lb.js":340,"./lo":341,"./lo.js":341,"./lt":342,"./lt.js":342,"./lv":343,"./lv.js":343,"./me":344,"./me.js":344,"./mi":345,"./mi.js":345,"./mk":346,"./mk.js":346,"./ml":347,"./ml.js":347,"./mn":348,"./mn.js":348,"./mr":349,"./mr.js":349,"./ms":350,"./ms-my":351,"./ms-my.js":351,"./ms.js":350,"./mt":352,"./mt.js":352,"./my":353,"./my.js":353,"./nb":354,"./nb.js":354,"./ne":355,"./ne.js":355,"./nl":356,"./nl-be":357,"./nl-be.js":357,"./nl.js":356,"./nn":358,"./nn.js":358,"./oc-lnc":359,"./oc-lnc.js":359,"./pa-in":360,"./pa-in.js":360,"./pl":361,"./pl.js":361,"./pt":362,"./pt-br":363,"./pt-br.js":363,"./pt.js":362,"./ro":364,"./ro.js":364,"./ru":365,"./ru.js":365,"./sd":366,"./sd.js":366,"./se":367,"./se.js":367,"./si":368,"./si.js":368,"./sk":369,"./sk.js":369,"./sl":370,"./sl.js":370,"./sq":371,"./sq.js":371,"./sr":372,"./sr-cyrl":373,"./sr-cyrl.js":373,"./sr.js":372,"./ss":374,"./ss.js":374,"./sv":375,"./sv.js":375,"./sw":376,"./sw.js":376,"./ta":377,"./ta.js":377,"./te":378,"./te.js":378,"./tet":379,"./tet.js":379,"./tg":380,"./tg.js":380,"./th":381,"./th.js":381,"./tk":382,"./tk.js":382,"./tl-ph":383,"./tl-ph.js":383,"./tlh":384,"./tlh.js":384,"./tr":385,"./tr.js":385,"./tzl":386,"./tzl.js":386,"./tzm":387,"./tzm-latn":388,"./tzm-latn.js":388,"./tzm.js":387,"./ug-cn":389,"./ug-cn.js":389,"./uk":390,"./uk.js":390,"./ur":391,"./ur.js":391,"./uz":392,"./uz-latn":393,"./uz-latn.js":393,"./uz.js":392,"./vi":394,"./vi.js":394,"./x-pseudo":395,"./x-pseudo.js":395,"./yo":396,"./yo.js":396,"./zh-cn":397,"./zh-cn.js":397,"./zh-hk":398,"./zh-hk.js":398,"./zh-mo":399,"./zh-mo.js":399,"./zh-tw":400,"./zh-tw.js":400};function r(e){var t=c(e);return n(t)}function c(e){if(!n.o(map,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return map[e]}r.keys=function(){return Object.keys(map)},r.resolve=c,e.exports=r,r.id=443},444:function(e,t,n){"use strict";n(401)},445:function(e,t,n){var r=n(28)(!1);r.push([e.i,"#canvas[data-v-73779cb4]{max-width:100%;max-height:75vh}.btn-margin[data-v-73779cb4]{margin:5px}",""]),e.exports=r},446:function(e,t,n){"use strict";n(402)},447:function(e,t,n){var r=n(28)(!1);r.push([e.i,".d-table[data-v-d3ee63d6]{width:100%;height:80vh;display:table}.d-cell[data-v-d3ee63d6]{display:table-cell;vertical-align:middle}.border-red[data-v-d3ee63d6]{border:1px solid red}.border-black[data-v-d3ee63d6]{border:1px solid #000}.charts[data-v-d3ee63d6]{background-color:rgba(204,201,201,.58039)}.semestre-label[data-v-d3ee63d6]{font-weight:400;font-size:.75em;letter-spacing:.1em;color:#7a7a7a}",""]),e.exports=r},519:function(e,t,n){"use strict";n.r(t);n(24),n(18),n(32),n(33);var r=n(7),c=(n(15),n(35),n(36),n(10),n(37),n(25),n(258)),o=n.n(c),l=(n(34),n(440),n(441)),d=n.n(l),h=n(99);function v(e){var t=Object(h.b)(50,100)/100;return Array.from({length:e},(function(){return"rgba(".concat(Object(h.b)(0,85),", ").concat(Object(h.b)(85,170),", ").concat(Object(h.b)(170,255),", ").concat(t,")")}))}var m={name:"Chart",props:{searchType:{type:String,default:""},acdUnitySelected:{type:Boolean,default:!1},searchId:{type:String,default:""}},data:function(){return{chart:void 0,acdUnities:[]}},computed:{getLabels:function(){return this.labelMap[this.searchType]},ctx:function(){return this.$refs&&this.$refs.canvas},labelMap:function(){return{monthly:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],semiannually:["1º semestre","2º semestre"],firstSemester:this.acdUnitySelected?"":this.acdUnities.map((function(u){return u.name})),secondSemester:this.acdUnitySelected?"":this.acdUnities.map((function(u){return u.name})),annually:this.acdUnitySelected?"":this.acdUnities.map((function(u){return u.name}))}}},mounted:function(){this.$axios.setHeader("x-xsrf-token",this.$cookies.get("xsrfToken")),!this.acdUnitySelected&&this.getAcdUnities()},methods:{createChart:function(e){this.chart&&this.chart.destroy();var t=Object.keys(e).length;this.chart=new d.a(this.ctx,{type:"bar",data:{labels:this.getLabels,datasets:[{label:"Nº de fichas registradas",data:Object.values(e),backgroundColor:v(t),borderColor:v(t),borderWidth:1}]},options:{hover:{mode:null},tooltips:{enabled:!0,callbacks:{title:function(e,data){return e[0].xLabel}}},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})},downloadImage:function(){var e=this.$refs.canvas.getContext("2d");e.save(),e.globalCompositeOperation="destination-over",e.fillStyle="white",e.fillRect(0,0,this.$refs.canvas.width,this.$refs.canvas.height),e.restore();var link=document.createElement("a");link.setAttribute("download","gráfico.png"),link.setAttribute("href",this.chart.toBase64Image()),document.body.appendChild(link),link.click(),document.body.removeChild(link)},getReport:function(e){window.open("/api/catalogCards/reportResult?pdfToken="+this.searchId,"_blank")},getAcdUnities:function(){var e=this;this.$axios.get("/api/academicUnities").then((function(t){var data=t.data;e.acdUnities=data.map((function(e){return{id:e.id,name:e.name}}))}))}}},j=(n(444),n(17));function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var _={name:"Statistics",layout:"adminLayout",middleware:"auth",components:{Chart:Object(j.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.searchId.length,expression:"searchId.length"}]},[n("canvas",{ref:"canvas",attrs:{id:"canvas"}}),e._v(" "),n("br"),e._v(" "),n("div",{staticClass:"level"},[n("div",{staticClass:"level-left"}),e._v(" "),n("div",{staticClass:"level-right"},[n("b-button",{staticClass:"btn-margin",attrs:{"icon-right":"download"},on:{click:e.downloadImage}}),e._v(" "),n("b-button",{staticClass:"btn-margin",attrs:{disabled:!e.searchId,"icon-right":"file-pdf"},on:{click:e.getReport}})],1)])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.searchId,expression:"!searchId"}],staticStyle:{"text-align":"center"}},[n("p",[e._v("Use os controles ao lado para pesquisar")])])])}),[],!1,null,"73779cb4",null).exports},data:function(){return{years:[],courses:[],searchYear:(new Date).getFullYear(),searchPeriod:"annually",searchCourseType:"",loading:!1,acdUnityPreviousSearch:"",academicUnities:[],month:"",semester:"",selectedAcdUnity:void 0,selectedCourse:void 0,searchId:"",tooltip:""}},watch:{selectedAcdUnity:function(){this.selectedCourse=void 0}},mounted:function(){this.$axios.setHeader("x-xsrf-token",this.$cookies.get("xsrfToken")),this.getYears()},methods:{getYears:function(){var e=this;this.$axios.get("/api/catalogCards/oldest").then((function(t){var data=t.data,n=e.searchYear-data.year+1;e.years=Array.from({length:n},(function(t,i){return e.searchYear-i}))}))},getAcdUnitiesByTerm:o()((function(e){var t=this;if(!e.length)return this.academicUnities=[],void(this.acdUnityPreviousSearch="");e!==this.acdUnityPreviousSearch&&(this.loading=!0,this.acdUnityPreviousSearch=e,this.$axios.get("/api/academicUnities",{params:{term:e}}).then((function(e){t.academicUnities=e.data})).catch().finally((function(){return t.loading=!1})))}),500),getCoursesByAcdUnity:function(e){var t=this;this.$axios.get("/api/courses",{params:{unityAcronym:e}}).then((function(e){var data=e.data;t.courses=data})).catch((function(e){return console.log(e)})).finally((function(){return t.loading=!1}))},onSelectedAcdUnity:function(option){this.selectedAcdUnity=option,this.selectedAcdUnity&&this.getCoursesByAcdUnity(this.selectedAcdUnity.acronym)},getSemesterIndex:function(){return"firstSemester"===this.searchPeriod?"0":"secondSemester"===this.searchPeriod?"1":null},onSubmit:function(){var e=this;this.$axios.post("/api/catalogCards/q",y(y(y(y(y({year:+this.searchYear},Object(h.a)("month",this.month)),Object(h.a)("semester",this.getSemesterIndex())),Object(h.a)("unityName",this.selectedAcdUnity&&this.selectedAcdUnity.name)),Object(h.a)("courseName",this.selectedCourse)),Object(h.a)("type",this.searchCourseType)),{params:{searchType:this.searchPeriod}}).then((function(t){e.searchId=t.headers.pdftoken,e.$refs.chart.createChart(t.data)}))}}},k=(n(446),Object(j.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("section",{staticClass:"section columns is-full-page"},[n("aside",{staticClass:"column is-3"},[n("p",{staticClass:"menu-label title is-hidden-touch has-text-left"},[e._v("\n        Filtros\n      ")]),e._v(" "),n("br"),e._v(" "),n("form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[n("p",{staticClass:"menu-label is-capitalized"},[e._v("\n          Ano\n        ")]),e._v(" "),n("b-field",[n("b-select",{attrs:{"aria-placeholder":"Selecionar ano",rounded:"",size:"is-small"},model:{value:e.searchYear,callback:function(t){e.searchYear=t},expression:"searchYear"}},e._l(e.years,(function(t){return n("option",{key:t,domProps:{value:t}},[e._v("\n              "+e._s(t)+"\n            ")])})),0)],1),e._v(" "),n("br"),e._v(" "),n("p",{staticClass:"menu-label is-capitalized"},[e._v("\n          Período\n        ")]),e._v(" "),n("section",[n("div",{staticClass:"field"},[n("b-radio",{attrs:{size:"is-small","native-value":"monthly",type:"is-info"},model:{value:e.searchPeriod,callback:function(t){e.searchPeriod=t},expression:"searchPeriod"}},[e._v("\n              Mensal\n            ")])],1),e._v(" "),n("div",{staticClass:"field"},[n("b-radio",{attrs:{size:"is-small","native-value":"firstSemester",type:"is-info"},model:{value:e.searchPeriod,callback:function(t){e.searchPeriod=t},expression:"searchPeriod"}},[e._v("\n              1º Semestre\n            ")]),e._v(" "),n("b-radio",{attrs:{size:"is-small","native-value":"secondSemester",type:"is-info"},model:{value:e.searchPeriod,callback:function(t){e.searchPeriod=t},expression:"searchPeriod"}},[e._v("\n              2º Semestre\n            ")])],1),e._v(" "),n("div",{staticClass:"field"},[n("b-radio",{attrs:{size:"is-small","native-value":"annually",type:"is-info"},model:{value:e.searchPeriod,callback:function(t){e.searchPeriod=t},expression:"searchPeriod"}},[e._v("\n              Anual\n            ")])],1)]),e._v(" "),n("br"),e._v(" "),e._m(0),e._v(" "),n("b-field",[n("b-select",{attrs:{placeholder:"Selecione","aria-placeholder":"Selecione",size:"is-small",rounded:""},model:{value:e.searchCourseType,callback:function(t){e.searchCourseType=t},expression:"searchCourseType"}},[n("option",{attrs:{value:""}},[e._v("Todos")]),e._v(" "),n("option",{attrs:{value:"tccGraduation"}},[e._v("Graduação")]),e._v(" "),n("option",{attrs:{value:"tccExpert"}},[e._v("Especialização")]),e._v(" "),n("option",{attrs:{value:"dissertation"}},[e._v("Mestrado")]),e._v(" "),n("option",{attrs:{value:"thesis"}},[e._v("Doutorado")])])],1),e._v(" "),n("br"),e._v(" "),n("p",{staticClass:"menu-label is-capitalized"},[e._v("\n          Unidade Acadêmica\n        ")]),e._v(" "),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-half"},[n("b-field",[n("b-tooltip",{attrs:{label:e.tooltip,active:!!e.acdUnityPreviousSearch.length,position:"is-right"}},[n("b-autocomplete",{attrs:{data:e.academicUnities,loading:e.loading,field:"acronym",placeholder:"Buscar","aria-placeholder":"Buscar",rounded:"",icon:"magnify",size:"is-small"},on:{typing:e.getAcdUnitiesByTerm,select:e.onSelectedAcdUnity},scopedSlots:e._u([{key:"default",fn:function(t){var option=t.option;return[n("span",{on:{mouseover:function(t){e.tooltip=option.name}}},[e._v("\n                      "+e._s(option.acronym)+"\n                    ")])]}}])},[e._v(" "),n("template",{slot:"empty"},[e._v("\n                    Nenhum resultado encontrado\n                  ")])],2)],1)],1)],1)]),e._v(" "),e.selectedAcdUnity?[n("p",{staticClass:"menu-label is-capitalized"},[e._v("\n            Curso\n          ")]),e._v(" "),n("b-field",[n("b-select",{attrs:{placeholder:"Selecione","aria-placeholder":"Selecione",size:"is-small",rounded:""},model:{value:e.selectedCourse,callback:function(t){e.selectedCourse=t},expression:"selectedCourse"}},e._l(e.courses,(function(t){return n("option",{key:t.id,domProps:{value:t.name}},[e._v("\n                "+e._s(t.name)+"\n              ")])})),0)],1)]:e._e(),e._v(" "),n("br"),e._v(" "),n("div",{staticClass:"columns is-centered"},[n("div",{staticClass:"column is-10"},[n("b-button",{staticClass:"is-info",attrs:{"native-type":"submit"}},[e._v("\n              Buscar\n            ")])],1)])],2)]),e._v(" "),n("div",{staticClass:"column is-9 charts is-fullheight"},[n("div",{staticClass:"d-table"},[n("div",{staticClass:"d-cell"},[n("chart",{ref:"chart",attrs:{"search-id":e.searchId,"search-type":e.searchPeriod,"acd-unities":e.academicUnities,"acd-unity-selected":!!e.selectedAcdUnity}})],1)])])])])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"menu-label is-capitalized"},[e._v("\n          Tipo "),n("span",{staticClass:"is-lowercase"},[e._v("de")]),e._v(" Curso\n        ")])}],!1,null,"d3ee63d6",null));t.default=k.exports}}]);